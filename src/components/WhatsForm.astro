---
import { siteData } from '../data/site.ts';
---

<section id="contato" class="py-16 lg:py-24 bg-neutral-dark text-white relative overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute top-0 left-0 w-96 h-96 bg-primary-blue rounded-full transform -translate-x-48 -translate-y-48"></div>
    <div class="absolute bottom-0 right-0 w-80 h-80 bg-primary-green rounded-full transform translate-x-40 translate-y-40"></div>
    <div class="absolute top-1/2 left-1/2 w-64 h-64 bg-accent-amber rounded-full transform -translate-x-32 -translate-y-32"></div>
  </div>
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      <!-- Left Column - Content -->
      <div>
        <span class="inline-block px-4 py-2 bg-primary-blue/20 text-primary-blue font-semibold rounded-full text-sm mb-6">
          Fale Conosco
        </span>
        
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-6 leading-tight">
          Pronto para transformar 
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary-blue to-primary-green">
            seu destino?
          </span>
        </h2>
        
        <p class="text-xl text-gray-300 mb-8 leading-relaxed">
          Solicite um diagnóstico gratuito e descubra como nossa tecnologia pode 
          aumentar a satisfação dos visitantes e a receita do seu destino.
        </p>
        
        <!-- Benefits List -->
        <div class="space-y-4 mb-8">
          <div class="flex items-center space-x-3">
            <div class="w-6 h-6 bg-primary-green rounded-full flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
            </div>
            <span class="text-gray-300">Diagnóstico gratuito em até 48h</span>
          </div>
          <div class="flex items-center space-x-3">
            <div class="w-6 h-6 bg-primary-green rounded-full flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
            </div>
            <span class="text-gray-300">Proposta personalizada sem compromisso</span>
          </div>
          <div class="flex items-center space-x-3">
            <div class="w-6 h-6 bg-primary-green rounded-full flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
            </div>
            <span class="text-gray-300">Implementação em até 30 dias</span>
          </div>
        </div>
        
        <!-- Contact Info -->
        <div class="bg-white/5 rounded-2xl p-6 backdrop-blur-sm border border-white/10">
          <h3 class="font-bold text-lg mb-4">Ou entre em contato diretamente:</h3>
          <div class="space-y-3">
            <div class="flex items-center space-x-3">
              <svg class="w-5 h-5 text-primary-blue" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
              </svg>
              <a href={`https://wa.me/${siteData.company.whatsapp}`} class="text-gray-300 hover:text-white transition-colors">
                {siteData.company.phone}
              </a>
            </div>
            <div class="flex items-center space-x-3">
              <svg class="w-5 h-5 text-primary-blue" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
              </svg>
              <a href={`mailto:${siteData.company.email}`} class="text-gray-300 hover:text-white transition-colors">
                {siteData.company.email}
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Right Column - Form -->
      <div>
        <div class="bg-white rounded-3xl p-8 lg:p-10 shadow-2xl">
          <div class="text-center mb-8">
            <h3 class="text-2xl lg:text-3xl font-bold text-neutral-dark mb-4">
              Receba seu diagnóstico gratuito
            </h3>
            <p class="text-gray-600">
              Preencha o formulário e receba uma análise personalizada em até 48 horas, após contato da empresa.
            </p>
          </div>
          
          <form id="whatsappForm" class="space-y-6">
            <!-- Name Field -->
            <div>
              <label for="name" class="block text-sm font-semibold text-neutral-dark mb-2">
                Nome Completo *
              </label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required 
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all duration-200 text-neutral-dark"
                placeholder="Seu nome completo"
              >
            </div>
            
            <!-- Email Field -->
            <div>
              <label for="email" class="block text-sm font-semibold text-neutral-dark mb-2">
                E-mail *
              </label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required 
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all duration-200 text-neutral-dark"
                placeholder="seu@email.com"
              >
            </div>
            
            <!-- Phone Field -->
            <div>
              <label for="phone" class="block text-sm font-semibold text-neutral-dark mb-2">
                Telefone/WhatsApp *
              </label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                required 
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all duration-200 text-neutral-dark"
                placeholder="(54) 99322-0552"
              >
            </div>
            

            
            <!-- Interest Field -->
            <div>
              <label for="interest" class="block text-sm font-semibold text-neutral-dark mb-2">
                Principal Interesse *
              </label>
              <select 
                id="interest" 
                name="interest" 
                required 
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all duration-200 text-neutral-dark"
              >
                <option value="">Selecione aqui</option>
                <option value="Mapa Interativo com Guia Falante">Mapa Interativo com Guia Falante</option>
                <option value="Portal de Turismo & Destinos">Portal de Turismo & Destinos</option>
                <option value="Sites Comerciais Inteligentes">Sites Comerciais Inteligentes</option>
                <option value="SEO Local & Google Maps Ads">SEO Local & Google Maps Ads</option>
                <option value="Consultoria Completa">Consultoria Completa</option>
                <option value="Outros">Outros</option>
              </select>
            </div>
            
            <!-- Message Field -->
            <div>
              <label for="message" class="block text-sm font-semibold text-neutral-dark mb-2">
                Mensagem
              </label>
              <textarea 
                id="message" 
                name="message" 
                rows="4" 
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all duration-200 text-neutral-dark resize-none"
                placeholder="Conte-nos mais sobre seu projeto ou dúvidas..."
              ></textarea>
            </div>
            
            <!-- Privacy Policy -->
            <div class="flex items-start space-x-3">
              <input 
                type="checkbox" 
                id="privacy" 
                name="privacy" 
                required 
                class="mt-1 w-4 h-4 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"
              >
              <label for="privacy" class="text-sm text-gray-600 leading-relaxed">
                Concordo em compartilhar meus dados para receber o diagnóstico gratuito e comunicações relevantes. 
                <a href="#" class="text-primary-blue hover:underline">Política de Privacidade</a>
              </label>
            </div>
            
            <!-- Submit Button -->
            <button 
              type="submit" 
              class="w-full bg-gradient-to-r from-primary-blue to-primary-green hover:from-blue-600 hover:to-green-600 text-white font-bold py-4 px-8 rounded-xl transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 flex items-center justify-center space-x-2"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
              </svg>
              <span>Enviar via WhatsApp</span>
            </button>
            
            <!-- Alternative Contact -->
            <div class="text-center pt-4 border-t border-gray-200">
              <p class="text-sm text-gray-600 mb-3">Prefere falar diretamente?</p>
              <a 
                href={`https://wa.me/${siteData.company.whatsapp}?text=Olá! Gostaria de solicitar um diagnóstico gratuito para meu destino.`}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center space-x-2 text-primary-blue hover:text-primary-green font-semibold transition-colors duration-200"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                </svg>
                <span>Clique aqui para WhatsApp direto</span>
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // WhatsApp Form Handler
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('whatsappForm');
    const whatsappNumber = '5554993220552'; // Updated WhatsApp number
    
    if (!form) return;
    
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get form data
      const formData = new FormData(form);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        company: formData.get('company'),
        interest: formData.get('interest'),
        message: formData.get('message'),
        privacy: formData.get('privacy')
      };
      
      // Validate required fields
      if (!data.name || !data.email || !data.phone || !data.interest || !data.privacy) {
        alert('Por favor, preencha todos os campos obrigatórios.');
        return;
      }
      
      // Format WhatsApp message with emojis (using direct concatenation)
      const message = 
        `🎯 *SOLICITAÇÃO DE DIAGNÓSTICO GRATUITO*\n\n` +
        `👤 *Nome:* ${data.name}\n` +
        `📧 *E-mail:* ${data.email}\n` +
        `📱 *Telefone:* ${data.phone}\n` +
        `🏢 *Empresa/Destino:* ${data.company}\n` +
        `💬 *Principal Interesse:* ${data.interest}\n` +
        (data.message && data.message.trim() !== '' ? `💬 *Mensagem:*\n${data.message}\n` : '') +
        `\n✅ Concordo com o compartilhamento dos dados para diagnóstico.\n` +
        `\n📅 *Enviado em:* ${new Date().toLocaleString('pt-BR')}\n` +
        `\n🚀 *Aguardo retorno em até 24h para diagnóstico gratuito!*`;
      
      // Encode message for URL (preserving emojis)
      const encodedMessage = encodeURIComponent(message);
      
      // Create WhatsApp URL
      const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
      

      
      // Open WhatsApp
      window.open(whatsappUrl, '_blank');
      
      // Show success message
      showSuccessMessage();
      
      // Reset form
      form.reset();
    });
    
    // Success message function
    function showSuccessMessage() {
      const button = form.querySelector('button[type="submit"]');
      const originalText = button.innerHTML;
      
      button.innerHTML = `
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
        </svg>
        <span>Mensagem Enviada!</span>
      `;
      button.classList.add('bg-green-500', 'hover:bg-green-600');
      button.classList.remove('from-primary-blue', 'to-primary-green', 'hover:from-blue-600', 'hover:to-green-600');
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.classList.remove('bg-green-500', 'hover:bg-green-600');
        button.classList.add('from-primary-blue', 'to-primary-green', 'hover:from-blue-600', 'hover:to-green-600');
      }, 3000);
    }
    
    // Phone mask
    const phoneInput = document.getElementById('phone');
    if (phoneInput) {
      phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length <= 11) {
          value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
          if (value.length < 14) {
            value = value.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
          }
        }
        
        e.target.value = value;
      });
    }
  });
</script>